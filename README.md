# Telegram Post Automation

–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∏–∑ –∫–∞–Ω–∞–ª–∞-–∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª Telegram.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û–ø—Ä–æ—Å –∫–∞–Ω–∞–ª–∞-–∏—Å—Ç–æ—á–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ Bot API —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ ID –∞–≤—Ç–æ—Ä–∞.
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ DeepSeek API —Å —Ä–µ—Ç—Ä–∞—è–º–∏.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏, —Ö–µ—à—Ç–µ–≥–æ–≤ –∏ –ø—Ä–æ–º–æ-—Å—Å—ã–ª–æ–∫ –Ω–∞ –±–∏—Ä–∂–∏ OKX/Binance.
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ –≤–∞—à –∫–∞–Ω–∞–ª –æ—Ç –∏–º–µ–Ω–∏ –±–æ—Ç–∞.
- CLI –Ω–∞ –±–∞–∑–µ Typer —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ `poll-once` –∏ `run-loop`.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|--------------------------|---------------------------------------------|
| `DEEPSEEK_APPI`          | API-–∫–ª—é—á DeepSeek                           |
| `USERNAMETELERGRAMBOT`   | –Æ–∑–µ—Ä–Ω–µ–π–º –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@my_bot`)         |
| `TELEGRAMKEY`            | –¢–æ–∫–µ–Ω Telegram Bot API                      |
| `TELEGRAMKANAL_ID_S_MINYSOM_V_NA4ALE` | ID/—é–∑–µ—Ä–Ω–µ–π–º –∫–∞–Ω–∞–ª–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TELEGRAMKANAL` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) |
| `TG_ISTO4NIK_ID`         | ID –∫–∞–Ω–∞–ª–∞-–∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ `sender_chat`, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `TGUSERID` –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –∏–º—è) |

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –∑–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫

–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:

```bash
PYTHONPATH=src python -m telegram_post.main poll-once
```

–ö–æ–º–∞–Ω–¥–∞ `poll-once` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø—Ü–∏—é `--state-file`, –ø–æ–∑–≤–æ–ª—è—é—â—É—é –∑–∞–¥–∞—Ç—å –ø—É—Ç—å –∫
—Ñ–∞–π–ª—É —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.telegram_post_state.json` –≤ —Ç–µ–∫—É—â–µ–π
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ–ª–µ–º `last_update_id`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```json
{"last_update_id": 123456789}
```

–§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è
–ø—Ä–æ–ø—É—Å–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤—ã–∑–æ–≤–∞—Ö.

–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ü–∏–∫–ª –æ–ø—Ä–æ—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 60 —Å–µ–∫—É–Ω–¥):

```bash
PYTHONPATH=src python -m telegram_post.main run-loop --interval 120
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã `TelegramClient` –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
PYTHONPATH=src python -m pytest -q
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—à–∏–±–∫–∏

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö
–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–æ-—Å—Å—ã–ª–æ–∫

–õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–æ-–±–ª–æ–∫–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –º–æ–¥—É–ª–µ
[`src/telegram_post/link_selector.py`](src/telegram_post/link_selector.py). –í –Ω—ë–º
–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è:

- `EXCHANGE_LINKS` ‚Äî —Ö—Ä–∞–Ω–∏—Ç —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–æ-—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏. –®–∞–±–ª–æ–Ω
  –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ—Ä—Ç–µ–∂ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É—é—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –ø–æ—Å—Ç—É.
- `KEYWORDS` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è
  –±–∏—Ä–∂–∞ –≤ —Ç–µ–∫—Å—Ç–µ –ø–æ—Å—Ç–∞.

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –±–∏—Ä–∂—É, –≤–Ω–µ—Å–∏—Ç–µ –¥–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á —Å –Ω—É–∂–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ `EXCHANGE_LINKS` –∏ –æ–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏.
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏/–∏–ª–∏ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –≤ `KEYWORDS`, –∏—Å–ø–æ–ª—å–∑—É—è
   —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `r"\\bbybit\\b"`).

–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –±–∏—Ä–∂–∏ Bybit:

```python
EXCHANGE_LINKS["bybit"] = (
    "\n\n",
    "üíº Bybit ‚Äî –±–æ–Ω—É—Å—ã –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é:\n",
    "‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: https://www.bybit.com/register?ref=YOURCODE\n",
)

KEYWORDS["bybit"] = (r"\bbybit\b", r"\b–±–∞–π–±–∏—Ç\b")
```

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–º–æ-—Å—Å—ã–ª–∫–∞–º–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞, –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ
–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Ñ–∞–π–ª `.env` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `config/exchanges.json`)
–∏ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- –ö–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è `black`, –ª–∏–Ω—Ç–µ—Ä ‚Äî `ruff` (–¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
- –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è persistent-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è `update_id`, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏—Ä–∂–∏.
